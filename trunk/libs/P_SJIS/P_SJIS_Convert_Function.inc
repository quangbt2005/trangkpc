<?
/*********************************************************************/
/*      V001 ï¿½F ï¿½Vï¿½K  2004.05.01  ï¿½ï¿½ï¿½`                               */
/*      V002 ï¿½F ï¿½Ç‰ï¿½  2006.06.01  ï¿½ï¿½ï¿½`                               */
/*      V003 ï¿½F ï¿½Ç‰ï¿½  2007.05.25  ï¿½ï¿½ï¿½`                               */
/*********************************************************************/

/*********************************************************************/
/*    ï¿½Öï¿½ï¿½ï¿½ ï¿½F P_SJIS_Convert                                       */
/*-------------------------------------------------------------------*/
/*      ï¿½@ï¿½\ ï¿½F SJISï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Õ”ï¿½Rï¿½[ï¿½hï¿½Ö•ÏŠï¿½                         */
/*-------------------------------------------------------------------*/
/*      ï¿½ï¿½ ï¿½F $String        (i)    ï¿½ÏŠï¿½ï¿½ÎÛ•ï¿½ï¿½ï¿½ï¿½ï¿½                 */
/*           ï¿½F $GAIJI         (i)    ï¿½ÏŠï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ÌŽwï¿½ï¿½                 */
/*           ï¿½F $Convert_Array (i)    ï¿½ÆŽï¿½ï¿½ÏŠï¿½ï¿½pï¿½zï¿½ï¿½Ì’ï¿½`           */
/*           ï¿½F $GAIJI_Flg     (i)    ï¿½Oï¿½ï¿½ï¿½tï¿½ï¿½ï¿½O                     */
/*           ï¿½F $KANA          (i)    ï¿½ÏŠï¿½ï¿½tï¿½ï¿½ï¿½O             *//*P003*/
/*-------------------------------------------------------------------*/
/*    ï¿½ß‚ï¿½l ï¿½F ï¿½ÏŠï¿½ï¿½ã•¶ï¿½ï¿½ï¿½ï¿½                                         */
/*-------------------------------------------------------------------*/
/*      ï¿½xï¿½ï¿½ ï¿½F ï¿½ÏŠï¿½ï¿½ÎÛ•ï¿½ï¿½ï¿½ï¿½ï¿½Ì•ï¿½ï¿½ï¿½ï¿½Rï¿½[ï¿½hï¿½ï¿½"SJIS"ï¿½Å’ï¿½Å‚ï¿½ï¿½B         */
/*           ï¿½F                                                      */
/*           ï¿½F ï¿½Oï¿½ï¿½ï¿½[ï¿½oï¿½ï¿½ï¿½Ìˆï¿½Ïï¿½ï¿½ï¿½ï¿½Lï¿½ï¿½ï¿½Ä‚ï¿½ï¿½ï¿½Ì‚ÅAï¿½ï¿½ï¿½Lï¿½Ì•Ïï¿½     */
/*           ï¿½F ï¿½É‘Î‚ï¿½ï¿½ÄŽQï¿½ÆˆÈŠOï¿½Ì—ï¿½ï¿½pï¿½Í”â¯‚Ä‰ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½B               */
/*           ï¿½F                                                      */
/*           ï¿½F $P_SJIS_SetGAIJI                                     */
/*           ï¿½F                                                      */
/*           ï¿½F ï¿½È‰ï¿½ï¿½Ì’è”ï¿½ð—˜—pï¿½ï¿½ï¿½Ä‚ï¿½ï¿½Ü‚ï¿½                   *//*P003*/
/*           ï¿½F                                              *//*P003*/
/*           ï¿½F SJIS_optionConvert                           *//*P003*/
/*-------------------------------------------------------------------*/
/* Copyright ï¿½F DNP DigitalCom CO.,LTD.                              */
/*      P001 ï¿½F ï¿½Vï¿½K  2004.05.01  ï¿½ï¿½ï¿½`                               */
/*      P002 ï¿½F ï¿½Ç‰ï¿½  2006.06.01  ï¿½ï¿½ï¿½`                               */
/*      P003 ï¿½F ï¿½Ç‰ï¿½  2007.05.25  ï¿½ï¿½ï¿½`                               */
/*********************************************************************/
/* P003 : Change Start!! *********************************************/
/**********************************************************************
function P_SJIS_Convert
         ( $String, $GAIJI = "", $Convert_Array = "", $GAIJI_Flg = "" )
{
**********************************************************************/
function P_SJIS_Convert( $String, $GAIJI = "", $Convert_Array = "",
                                          $GAIJI_Flg = "", $KANA = "" )
{
/*********************************************** P003 : Change End!! */
/* P002 : Add Start!! ************************************************/

 global $P_SJIS_SetGAIJI;

 if( mb_strlen( $GAIJI ) <= 0 ){ $GAIJI = $P_SJIS_SetGAIJI; }

/************************************************** P002 : Add End!! */
 if( $GAIJI == "" ){ $GAIJI = P_SJIS_Convert_Get_DefaultGAIJI( ); }
   else
 if( mb_strtoupper( $GAIJI ) == "DELETE" ){ $GAIJI = ""; }

 $Out = P_SJIS_Convert_ChangeString( $String, $GAIJI,
                                          $Convert_Array, $GAIJI_Flg );
/* P003 : Add Start!! ************************************************/

 if( @defined( "SJIS_optionConvert" ) == TRUE && mb_strlen( SJIS_optionConvert ) > 0 )
   {
    $Out = @mb_convert_kana( $Out, SJIS_optionConvert );
   }
   else
 if( mb_strlen( $KANA ) > 0 )
   {
    $Out = @mb_convert_kana( $Out, $KANA );
   }

/************************************************** P003 : Add End!! */
 return $Out;
}

/*********************************************************************/
/*    ï¿½Õ”ï¿½ï¿½ï¿½Cï¿½uï¿½ï¿½ï¿½ï¿½ï¿½Öï¿½ï¿½Q                                           */
/*********************************************************************/

@include_once( LIB_PATH . "P_SJIS/P_SJIS_Convert_Private_Function.inc" );

switch( mb_strtoupper( mb_internal_encoding( ) ) )
{
 case "SJIS"     :
 case "SJIS-WIN" : {
                    @include_once( LIB_PATH . "P_SJIS/P_SJIS_Convert_Get_DefaultGAIJI_SJIS_Private_Function.inc" );
                    break;
                   }
 case "UTF8"     :
 case "UTF-8"    : {
                    @include_once( LIB_PATH . "P_SJIS/P_SJIS_Convert_Get_DefaultGAIJI_UTF8_Private_Function.inc" );
                    break;
                   }
 default         : {
                    @include_once( LIB_PATH . "P_SJIS/P_SJIS_Convert_Get_DefaultGAIJI_EUC_Private_Function.inc" );
                    break;
                   }
}

?>
